"use strict";$(document).ready(function(){var a=l(),o=i(a);function s(t,e){$("#failedToModal").modal("show"),$("#failedModalHeadline").empty().append(t),$("#failedModalBody").empty().append(e)}function l(){var e;return $.ajax({type:"POST",url:"./backend/item/item.php",data:{postType:"countRow"},async:!1,success:function(t){$("#rowTotal").empty().append(t),e=t}}),e}function i(t){var e=Math.ceil(t/20);return $("#pageTotal").empty().text(e),$("#currentPageNum").val()>e&&$("#currentPageNum").val(e),e}function t(){$("#search-input-wrapper").css("display","block"),$("#search-input").empty().append($("#searchRow").val());var l=$("#searchRow").val(),t=$("#currentPageNum").val()>o?o:$("#currentPageNum").val();$("#currentPageNum").val(t),$.ajax({type:"POST",url:"./backend/item/item.php",data:{postType:"searchRow",search:l,pageNum:t},success:function(t){var e,a;i((e=l,$.ajax({type:"POST",url:"./backend/item/item.php",data:{postType:"searchRowCount",search:e},async:!1,success:function(t){$("#rowTotal").empty().append(t),a=t}}),a)),"No result"==t?(s("Failed","No result match"),n("item"),d("item"),n("general"),d("general"),n("vendor"),d("vendor"),n("picture"),d("picture"),n("plu"),d("plu"),n("others"),d("others")):(t=t.includes("Success")?JSON.parse(t.replace("Success","")):JSON.parse(t),console.log(t),r(t,"item"),r(t,"general"),r(t,"vendor"),r(t,"picture"),r(t,"plu"),r(t,"others"),$(".editBtn").on("click",function(){var t=$(this).attr("id").split("-"),e=$("#item-no-"+t[1]).text(),a=$("#doc-key-"+t[1]).text(),l=$("#description-"+t[1]).text(),o=$("#description2-"+t[1]).text(),s=$("#description3-"+t[1]).text(),i=$("#master-vendor-"+t[1]).text(),c=$("#vendor-item-"+t[1]).text(),d=$("#item-type-"+t[1]).text(),n=$("#category-"+t[1]).text(),r=$("#item-group-"+t[1]).text(),h=$("#unit-cost-"+t[1]).text(),p=$("#selling-price1-"+t[1]).text(),m=$("#qty-hand-"+t[1]).text(),g=$("#qty-hold-"+t[1]).text(),u=$("#qty-available-"+t[1]).text(),b=$("#qty-reorder-available-"+t[1]).text(),f=$("#qty-max-"+t[1]).text(),v=$("#vendor-"+t[1]).text(),y=$("#vendor-company-"+t[1]).text(),x=$("#plu-"+t[1]).text(),_=$("#info1-"+t[1]).text(),I=$("#info2-"+t[1]).text(),C=$("#info3-"+t[1]).text(),w=$("#info4-"+t[1]).text(),T=$("#info5-"+t[1]).text(),k=$("#info6-"+t[1]).text(),N=$("#info7-"+t[1]).text(),q=$("#info8-"+t[1]).text(),M=$("#info9-"+t[1]).text(),P=$("#info10-"+t[1]).text();$("#edit-item-no").val(e.replace(/\s/g,"")),$("#edit-doc-key").val(a),$("#edit-description").val(l.replace(/\s/g,"")),$("#edit-description2").val(o),$("#edit-description3").val(s.replace(/\s/g,"")),$("#edit-master-vendor").val(i),$("#edit-vendor-item").val(c),$("#edit-item-type").val(d),$("#edit-category").val(n),$("#edit-item-group").val(r),$("#edit-unit-cost").val(h),$("#edit-selling-price1").val(p),$("#edit-qty-hand").val(m),$("#edit-qty-hold").val(g),$("#edit-qty-available").val(u),$("#edit-qty-reorder-available").val(b),$("#edit-qty-max").val(f),$("#edit-vendor-name").val(v),$("#edit-vendor-company").val(y),$("#edit-plu-item").val(x),$("#edit-info1").val(_),$("#edit-info2").val(I),$("#edit-info3").val(C),$("#edit-info4").val(w),$("#edit-info5").val(T),$("#edit-info6").val(k),$("#edit-info7").val(N),$("#edit-info8").val(q),$("#edit-info9").val(M),$("#edit-info10").val(P),$("#editItemSubmitButton").click(function(){$("#edit_id").val(t[1])})}),$(".deleteBtn").on("click",function(){var t=$(this).attr("id").split("-");$("#deleteItemName").empty().append($("#description-"+t[1]).html()),$("#delete_id").val(t[1])}))},error:function(t){s("Failed","Unexpected error occur : "+t)}})}function c(){var t;a=l(),o=i(a),t=0!=$("#currentPageNum").val()?$("#currentPageNum").val()>o?o:$("#currentPageNum").val():1,$("#currentPageNum").val(t),$.ajax({type:"POST",url:"./backend/item/item.php",data:{postType:"view",pageNum:t},success:function(t){"0 results"==t?(n("item"),d("item"),n("general"),d("general"),n("vendor"),d("vendor"),n("picture"),d("picture"),n("plu"),d("plu"),n("others"),d("others")):(r(t=t.includes("Success")?JSON.parse(t.replace("Success","")):JSON.parse(t),"item"),r(t,"general"),r(t,"vendor"),r(t,"picture"),r(t,"plu"),r(t,"others"),$(".editBtn").on("click",function(){var t=$(this).attr("id").split("-"),e=$("#item-no-"+t[1]).text(),a=$("#doc-key-"+t[1]).text(),l=$("#description-"+t[1]).text(),o=$("#description2-"+t[1]).text(),s=$("#description3-"+t[1]).text(),i=$("#master-vendor-"+t[1]).text(),c=$("#vendor-item-"+t[1]).text(),d=$("#item-type-"+t[1]).text(),n=$("#category-"+t[1]).text(),r=$("#item-group-"+t[1]).text(),h=$("#unit-cost-"+t[1]).text(),p=$("#selling-price1-"+t[1]).text(),m=$("#qty-hand-"+t[1]).text(),g=$("#qty-hold-"+t[1]).text(),u=$("#qty-available-"+t[1]).text(),b=$("#qty-reorder-available-"+t[1]).text(),f=$("#qty-max-"+t[1]).text(),v=$("#vendor-"+t[1]).text(),y=$("#vendor-company-"+t[1]).text(),x=$("#plu-"+t[1]).text(),_=$("#info1-"+t[1]).text(),I=$("#info2-"+t[1]).text(),C=$("#info3-"+t[1]).text(),w=$("#info4-"+t[1]).text(),T=$("#info5-"+t[1]).text(),k=$("#info6-"+t[1]).text(),N=$("#info7-"+t[1]).text(),q=$("#info8-"+t[1]).text(),M=$("#info9-"+t[1]).text(),P=$("#info10-"+t[1]).text();$("#edit-item-no").val(e.replace(/\s/g,"")),$("#edit-doc-key").val(a),$("#edit-description").val(l.replace(/\s/g,"")),$("#edit-description2").val(o),$("#edit-description3").val(s.replace(/\s/g,"")),$("#edit-master-vendor").val(i),$("#edit-vendor-item").val(c),$("#edit-item-type").val(d),$("#edit-category").val(n),$("#edit-item-group").val(r),$("#edit-unit-cost").val(h),$("#edit-selling-price1").val(p),$("#edit-qty-hand").val(m),$("#edit-qty-hold").val(g),$("#edit-qty-available").val(u),$("#edit-qty-reorder-available").val(b),$("#edit-qty-max").val(f),$("#edit-vendor-name").val(v),$("#edit-vendor-company").val(y),$("#edit-plu-item").val(x),$("#edit-info1").val(_),$("#edit-info2").val(I),$("#edit-info3").val(C),$("#edit-info4").val(w),$("#edit-info5").val(T),$("#edit-info6").val(k),$("#edit-info7").val(N),$("#edit-info8").val(q),$("#edit-info9").val(M),$("#edit-info10").val(P),$("#editItemSubmitButton").click(function(){$("#edit_id").val(t[1])})}),$(".deleteBtn").on("click",function(){var t=$(this).attr("id").split("-");$("#deleteItemName").empty().append($("#description-"+t[1]).html()),$("#delete_id").val(t[1])}))},error:function(){s("Failed","Unexpected error occur : "+e)}})}function d(t){switch(t){case"item":$("#itemTable").DataTable({searching:!1,paginate:!1,lengthChange:!1,info:!1,scrollX:!0,scrollY:"1000px",scrollCollapse:!0}).columns.adjust();$(".dataTables_length").addClass("bs-select");break;case"general":$("#generalTable").DataTable({searching:!1,paginate:!1,lengthChange:!1,info:!1,scrollX:!0,scrollY:"1000px",scrollCollapse:!0}).columns.adjust();$(".dataTables_length").addClass("bs-select");break;case"vendor":$("#vendorTable").DataTable({searching:!1,paginate:!1,lengthChange:!1,info:!1,scrollX:!0,scrollY:"1000px",scrollCollapse:!0}).columns.adjust();$(".dataTables_length").addClass("bs-select");break;case"picture":$("#pictureTable").DataTable({searching:!1,paginate:!1,lengthChange:!1,info:!1,scrollX:!0,scrollY:"1000px",scrollCollapse:!0}).columns.adjust();$(".dataTables_length").addClass("bs-select");break;case"plu":$("#pluTable").DataTable({searching:!1,paginate:!1,lengthChange:!1,info:!1,scrollX:!0,scrollY:"1000px",scrollCollapse:!0}).columns.adjust();$(".dataTables_length").addClass("bs-select");break;case"others":$("#othersTable").DataTable({searching:!1,paginate:!1,lengthChange:!1,info:!1,scrollX:!0,scrollY:"1000px",scrollCollapse:!0}).columns.adjust();$(".dataTables_length").addClass("bs-select")}}function n(t){switch(t){case"item":$("#item-table").empty().append('<table id="itemTable" class="table table-hover table-bordered table_fullwidth text-center" cellspacing="0" >  <thead class="grey lighten-2  ">  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Item No</th>  <th scope="col" class="th-lg">Doc Key</th>  <th scope="col" class="th-lg">Description</th>  <th scope="col" class="th-lg">Description 2</th>  <th scope="col" class="th-lg">Description 3</th>  <th scope="col" class="th-lg">Selling Price1</th>  <th scope="col" class="th-lg">Master Vendor</th>  <th scope="col" class="th-lg">Vendor Item</th>  <th scope="col" class="th-lg">Item Type</th>  <th scope="col" class="th-lg">Category</th>  <th scope="col" class="th-lg">Item Group</th>  </tr>  </thead>  <tbody id="itemContent">  </tbody>  <tfoot class="grey lighten-2">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Item No</th>  <th scope="col" class="th-lg">Doc Key</th>  <th scope="col" class="th-lg">Description</th>  <th scope="col" class="th-lg">Description 2</th>  <th scope="col" class="th-lg">Description 3</th>  <th scope="col" class="th-lg">Selling Price1</th>  <th scope="col" class="th-lg">Master Vendor</th>  <th scope="col" class="th-lg">Vendor Item</th>  <th scope="col" class="th-lg">Item Type</th>  <th scope="col" class="th-lg">Category</th>  <th scope="col" class="th-lg">Item Group</th>  </tr>  </tfoot>  </table>');break;case"general":$("#general-table").empty().append('<table id="generalTable" class="table table-hover table-bordered table_fullwidth text-center" cellspacing="0" >  <thead class="grey lighten-2  ">  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Item No</th>  <th scope="col" class="th-lg">Unit Cost</th>  <th scope="col" class="th-lg">Qty on Hand</th>  <th scope="col" class="th-sm">Qty Hold</th>  <th scope="col" class="th-lg">Qty Available</th>  <th scope="col" class="th-lg">Qty Reorder Available</th>  <th scope="col" class="th-sm">Qty Max</th>  </tr>  </thead>  <tbody id="generalContent">  </tbody>  <tfoot class="grey lighten-2">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Item No</th>  <th scope="col" class="th-lg">Unit Cost</th>  <th scope="col" class="th-lg">Qty on Hand</th>  <th scope="col" class="th-sm">Qty Hold</th>  <th scope="col" class="th-lg">Qty Available</th>  <th scope="col" class="th-lg">Qty Reorder Available</th>  <th scope="col" class="th-sm">Qty Max</th>  </tr>  </tfoot>  </table>');break;case"vendor":$("#vendor-table").empty().append('<table id="vendorTable" class="table table-hover table-bordered table_fullwidth text-center" cellspacing="0">  <thead class="grey lighten-2  ">  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Item No</th>  <th scope="col" class="th-lg">Vendor</th>  <th scope="col" class="th-lg">Vendor Company</th>  </tr>  </thead>  <tbody id="vendorContent">  </tbody>  <tfoot class="grey lighten-2">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Item No</th>  <th scope="col" class="th-lg">Vendor</th>  <th scope="col" class="th-lg">Vendor Company</th>  </tr>  </tfoot>  </table>'),$(".dataTables_length").addClass("bs-select");break;case"picture":$("#picture-table").empty().append('<table id="pictureTable" class="table table-hover table-bordered table_fullwidth text-center" cellspacing="0">  <thead class="grey lighten-2  ">  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Item No</th>  <th scope="col" class="th-lg">Picture</th>  </tr>  </thead>  <tbody id="pictureContent">  </tbody>  <tfoot class="grey lighten-2">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Item No</th>  <th scope="col" class="th-lg">Picture</th>  </tr>  </tfoot>  </table>');break;case"plu":$("#plu-table").empty().append('<table id="pluTable" class="table table-hover table-bordered table_fullwidth text-center" cellspacing="0" >  <thead class="grey lighten-2  ">  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Item No</th>  <th scope="col" class="th-lg">PLU</th>  </tr>  </thead>  <tbody id="pluContent">  </tbody>  <tfoot class="grey lighten-2">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Item No</th>  <th scope="col" class="th-lg">PLU</th>  </tr>  </tfoot>  </table>');break;case"others":$("#others-table").empty().append('<table id="othersTable" class="table table-hover table-bordered table_fullwidth text-center" cellspacing="0">  <thead class="grey lighten-2  ">  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Item No</th>  <th scope="col" class="th-sm">Info 1</th>  <th scope="col" class="th-sm">Info 2</th>  <th scope="col" class="th-sm">Info 3</th>  <th scope="col" class="th-sm">Info 4</th>  <th scope="col" class="th-sm">Info 5</th>  <th scope="col" class="th-sm">Info 6</th>  <th scope="col" class="th-sm">Info 7</th>  <th scope="col" class="th-sm">Info 8</th>  <th scope="col" class="th-sm">Info 9</th>  <th scope="col" class="th-sm">Info 10</th>  </tr>  </thead>  <tbody id="othersContent">  </tbody>  <tfoot class="grey lighten-2">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Item No</th>  <th scope="col" class="th-sm">Info 1</th>  <th scope="col" class="th-sm">Info 2</th>  <th scope="col" class="th-sm">Info 3</th>  <th scope="col" class="th-sm">Info 4</th>  <th scope="col" class="th-sm">Info 5</th>  <th scope="col" class="th-sm">Info 6</th>  <th scope="col" class="th-sm">Info 7</th>  <th scope="col" class="th-sm">Info 8</th>  <th scope="col" class="th-sm">Info 9</th>  <th scope="col" class="th-sm">Info 10</th>  </tr>  </tfoot>  </table>')}}function r(t,e){switch(e){case"item":n("item"),$.each(t,function(t,e){t++,$("#itemContent").append('<tr> <th scope="row">'+t+'</th> <td> <button id="edit-'+e.item_id+'" class="btn btn-warning editBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#editModal"> <i class="fas fa-edit"></i> </button> <button id="delete-'+e.item_id+'" class="btn btn-danger deleteBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#deleteModal"><i class="fas fa-trash-alt"></i> </button> </td> <td id=\'item-no-'+e.item_id+"'>"+e.item_no+'</td> <td id="doc-key-'+e.item_id+'">'+e.doc_key+'</td> <td id="description-'+e.item_id+'">'+e.description+'</td> <td id="description2-'+e.item_id+'">'+e.description2+'</td> <td id="description3-'+e.item_id+'">'+e.description3+'</td> <td id="selling-price1-'+e.item_id+'">'+e.selling_price1+'</td> <td id="master-vendor-'+e.item_id+'">'+e.master_vendor+'</td> <td id="vendor-item-'+e.item_id+'">'+e.vendor_item+'</td> <td id="item-type-'+e.item_id+'">'+e.item_type+'</td> <td id="category-'+e.item_id+'">'+e.category+'</td> <td id="item-group-'+e.item_id+'">'+e.item_group+"</td> </tr>")}),d("item");break;case"general":n("general"),$.each(t,function(t,e){t++,$("#generalContent").append('<tr> <th scope="row">'+t+'</th> <td> <button id="edit-'+e.item_id+'" class="btn btn-warning editBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#editModal"> <i class="fas fa-edit"></i> </button> <button id="delete-'+e.item_id+'" class="btn btn-danger deleteBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#deleteModal"><i class="fas fa-trash-alt"></i> </button> </td> <td id=\'item-no-'+e.item_id+"'>"+e.item_no+'</td> <td id="unit-cost-'+e.item_id+'">'+e.unit_cost+'</td> <td id="qty-hand-'+e.item_id+'">'+e.qty_hand+'</td> <td id="qty-hold-'+e.item_id+'">'+e.qty_hold+'</td> <td id="qty-available-'+e.item_id+'">'+e.qty_available+'</td> <td id="qty-reorder-available-'+e.item_id+'">'+e.qty_reorder_available+'</td> <td id="qty-max-'+e.item_id+'">'+e.qty_max+"</td> </tr>")}),d("general");break;case"vendor":n("vendor"),$.each(t,function(t,e){t++,$("#vendorContent").append('<tr> <th scope="row">'+t+'</th> <td> <button id="edit-'+e.item_id+'" class="btn btn-warning editBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#editModal"> <i class="fas fa-edit"></i> </button> <button id="delete-'+e.item_id+'" class="btn btn-danger deleteBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#deleteModal"><i class="fas fa-trash-alt"></i> </button> </td> <td id=\'type-'+e.item_id+"'>"+e.item_no+'</td> <td id="vendor-'+e.item_id+'">'+e.vendor+'</td> <td id="vendor-company-'+e.item_id+'">'+e.vendor_company+"</td> </tr>")}),d("vendor");break;case"picture":n("picture"),$.each(t,function(t,e){t++,$("#pictureContent").append('<tr> <th scope="row">'+t+'</th> <td> <button id="edit-'+e.item_id+'" class="btn btn-warning editBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#editModal"> <i class="fas fa-edit"></i> </button> <button id="delete-'+e.item_id+'" class="btn btn-danger deleteBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#deleteModal"><i class="fas fa-trash-alt"></i> </button> </td> <td id=\'item-no-'+e.item_id+"'>"+e.item_no+'</td> <td id="item-picture-'+e.item_id+'"><img class="w-25" src="./assets/placeholder-images-image_large.png" alt="placeholder"></td> </tr>')}),d("picture");break;case"plu":n("plu"),$.each(t,function(t,e){t++,$("#pluContent").append('<tr> <th scope="row">'+t+'</th> <td> <button id="edit-'+e.item_id+'" class="btn btn-warning editBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#editModal"> <i class="fas fa-edit"></i> </button> <button id="delete-'+e.item_id+'" class="btn btn-danger deleteBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#deleteModal"><i class="fas fa-trash-alt"></i> </button> </td> <td id=\'item-no-'+e.item_id+"'>"+e.item_no+'</td> <td id="plu-'+e.item_id+'">'+e.plu+"</td> </tr>")}),d("plu");break;case"others":n("others"),$.each(t,function(t,e){t++,$("#othersContent").append('<tr> <th scope="row">'+t+'</th> <td> <button id="edit-'+e.item_id+'" class="btn btn-warning editBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#editModal"> <i class="fas fa-edit"></i> </button> <button id="delete-'+e.item_id+'" class="btn btn-danger deleteBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#deleteModal"><i class="fas fa-trash-alt"></i> </button> </td> <td id=\'item-no-'+e.item_id+"'>"+e.item_no+' /td> <td id="info1-'+e.item_id+'">'+e.info1+'</td> <td id="info2-'+e.item_id+'">'+e.info2+'</td> <td id="info3-'+e.item_id+'">'+e.info3+'</td> <td id="info4-'+e.item_id+'">'+e.info4+'</td> <td id="info5-'+e.item_id+'">'+e.info5+'</td> <td id="info6-'+e.item_id+'">'+e.info6+'</td> <td id="info7-'+e.item_id+'">'+e.info7+'</td> <td id="info8-'+e.item_id+'">'+e.info8+'</td> <td id="info9-'+e.item_id+'">'+e.info9+'</td> <td id="info10-'+e.item_id+'">'+e.info10+"</td> </tr>")}),d("others")}}$("#searchRow").val()?($("#search-input-wrapper").css("display","block"),$("#search-input").empty().append($("#searchRow").val()),t()):c(),$("#searchConfirm").click(function(){t($("#searchRow").val())}),$("#searchClear").click(function(){c(),$("#searchRow").val(""),$("#search-input-wrapper").css("display","none")}),$("#currentPageNum").focusout(function(){(""!=$("#searchRow").val()?t:c)()})});