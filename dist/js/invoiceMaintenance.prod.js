"use strict";$(document).ready(function(){var s=l(),c=n(s);function a(e){var t,s,c;""!=$("#search-customer_name").val()||""!=$("#search-customer_id").val()?(clearTimeout(t),$("#customer-search").empty().addClass("border").html('\n            <div class="d-flex justify-content-center">\n                <div class="spinner-border" role="status">\n                    <span class="sr-only">Loading...</span>\n                </div>\n            </div>\n            '),s=!0,t=setTimeout(function(){$.ajax({type:"POST",url:"./backend/invoice/viewCustmrItem.php",data:{postType:"searchRowCustomer",searchCustomerName:$("#search-customer_name").val(),searchCustomerID:$("#search-customer_id").val(),pageNum:e},success:function(t){"No result"==t?1==s&&($("#customer-search").empty().html("<h5>".concat(t,"</h5>")),s=!1):""==t?($("#customer-search").empty().removeClass("border"),s=!1):(c='\n                            <div class="sticky-top bg-white">\n                                <div class="row px-3 py-2">\n                                    <div class=" col-6 py-2 py-md-0">\n                                        <p class="my-auto">Search Result: <span class="font-weight-bold" id="customerSearchRowTotal"></span></p>\n                                    </div>\n                                    <div class=" col-6 py-2 py-md-0">\n                                        <div class="d-flex flex-row justify-content-end">\n                                            <p class="my-auto">Page : </p>\n                                            <input type="number" id="customerSearchCurrentPageNum" class="form-control w-25 mx-2 my-auto px-2 pageInput" min="1" value="'.concat(e,'">\n                                            <p class="my-auto"> of <span id="customerSearchPageTotal"></span></p>\n                                        </div>\n                                    </div>\n                                </div>\n                                <hr class="p-0 m-0">\n                            </div>\n                            <div class="overflow-auto" style="max-height:200px;">\n                            '),$.each(JSON.parse(t),function(t,e){c+='\n                                <a>\n                                    <div class="view overlay">\n                                        <div class="row px-3 py-2">\n                                            <div class="col-6">\n                                                <h5 class="my-auto">'.concat(e.name,'</h5>\n                                            </div>\n                                            <div class="col-6 text-right">\n                                                <p class="my-auto">').concat(e.customer_account,'</p>\n                                            </div>\n                                            <div class="mask flex-center rgba-grey-slight"> </div>\n                                        </div>\n                                    </div>\n                                </a>\n                                <hr class="p-0 m-0">\n                                ')}),c+="</div>",$("#customer-search").empty().html(c),s=!1,$.ajax({type:"POST",url:"./backend/invoice/viewCustmrItem.php",data:{postType:"searchRowCountCustomer",searchCustomerName:$("#search-customer_name").val(),searchCustomerID:$("#search-customer_id").val()},success:function(t){var e,s;$("#customerSearchRowTotal").empty().html(t),e=t,s=Math.ceil(e/10),$("#customerSearchPageTotal").empty().text(s),$("#customerSearchCurrentPageNum").attr("max",s),$("#customerSearchCurrentPageNum").on("focusout",function(){$("#customerSearchCurrentPageNum").val()<s?a($("#customerSearchCurrentPageNum").val()):a(s)})}}))}})},1e3)):($("#customer-search").empty().removeClass("border"),s=!1)}function o(e){var t,s,c;""!=$("#search-item").val()?(clearTimeout(t),$("#item-search").empty().addClass("border").html('\n            <div class="d-flex justify-content-center">\n                <div class="spinner-border" role="status">\n                    <span class="sr-only">Loading...</span>\n                </div>\n            </div>\n            '),s=!0,t=setTimeout(function(){$.ajax({type:"POST",url:"./backend/invoice/viewCustmrItem.php",data:{postType:"searchRowItem",search:$("#search-item").val(),pageNum:e},success:function(t){"No result"==t?1==s&&($("#item-search").empty().html("<h5>".concat(t,"</h5>")),s=!1):""==t?($("#item-search").empty().removeClass("border"),s=!1):(c='\n                            <div class="sticky-top bg-white">\n                                <div class="row px-3 py-2 ">\n                                    <div class=" col-6 py-2 py-md-0">\n                                        <p class="my-auto">Search Result: <span class="font-weight-bold" id="itemSearchRowTotal"></span></p>\n                                    </div>\n                                    <div class=" col-6 py-2 py-md-0">\n                                        <div class="d-flex flex-row justify-content-end">\n                                            <p class="my-auto">Page : </p>\n                                            <input type="number" id="itemSearchCurrentPageNum" class="form-control w-25 mx-2 my-auto px-2 pageInput" min="1" value="'.concat(e,'">\n                                            <p class="my-auto"> of <span id="itemSearchPageTotal"></span></p>\n                                        </div>\n                                    </div>\n                                </div>\n                                <hr class="p-0 m-0">\n                            </div>\n                            <div class="overflow-auto" style="max-height:200px;">\n                            '),$.each(JSON.parse(t),function(t,e){c+='\n                                <a>\n                                    <div class="view overlay">\n                                        <div class="row px-3 py-2">\n                                            <div class="col-8 d-flex flex-row">\n                                                <h5 class="my-auto">'.concat(e.description,'</h5>\n                                                <small class="my-auto px-2 text-muted">').concat(e.item_no,'</small>\n                                            </div>\n                                            <div class="col-4 d-flex flex-row justify-content-end">\n                                                <strong class="my-auto">Qty: </strong>\n                                                <p class="my-auto px-1 ').concat(0==e.qty_available?"text-danger":"",'">').concat(e.qty_available,'</p>\n                                            </div>\n                                            <div class="mask flex-center rgba-grey-slight"></div>\n                                        </div>\n                                    </div>\n                                </a>\n                                <hr class="p-0 m-0">\n                                ')}),c+="</div>",$("#item-search").empty().html(c),s=!1,$.ajax({type:"POST",url:"./backend/invoice/viewCustmrItem.php",data:{postType:"searchRowCountItem",search:$("#search-item").val()},success:function(t){var e,s;$("#itemSearchRowTotal").empty().html(t),e=t,s=Math.ceil(e/10),$("#itemSearchPageTotal").empty().text(s),$("#itemSearchCurrentPageNum").attr("max",s),$("#itemSearchCurrentPageNum").on("focusout",function(){$("#itemSearchCurrentPageNum").val()<s?o($("#itemSearchCurrentPageNum").val()):o(s)})}}))}})},1e3)):($("#item-search").empty().removeClass("border"),s=!1)}function l(){var e;return $.ajax({type:"POST",url:"./backend/customer/customer.php",data:{postType:"countRow"},async:!1,success:function(t){$("#rowTotal").empty().append(t),e=t}}),e}function n(t){var e=Math.ceil(t/10);return $("#pageTotal").empty().text(e),$("#currentPageNum").val()>e&&$("#currentPageNum").val(e),e}function t(){var t;s=l(),c=n(s),t=0!=$("#currentPageNum").val()?$("#currentPageNum").val()>c?c:$("#currentPageNum").val():1,$("#currentPageNum").val(t),$.ajax({type:"POST",url:"./backend/customer/customer.php",data:{postType:"view",pageNum:t},success:function(t){"0 results"==t||"No Result"==t?(d("general"),r("general")):function(t,e){switch(e){case"general":d("general"),$.each(t,function(t,e){t++,$("#generalContent").append('<tr> <th scope="row">'+t+'</th> <td> <button id="edit-'+e.customer_id+'" class="btn btn-warning editBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#editModal"> <i class="fas fa-edit"></i> </button> <button id="delete-'+e.customer_id+'" class="btn btn-danger deleteBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#deleteModal"> <i class="fas fa-trash-alt"></i> </button> </td> <td id=\'customer_id-'+e.customer_id+"'>"+e.customer_id+"</td> <td id='customer_account-"+e.customer_id+"'>"+e.customer_account+"</td> <td id='name-"+e.customer_id+"'>"+e.name+"</td> <td id='reg_num-"+e.customer_id+"'>"+e.reg_num+"</td> <td id='outstanding-"+e.customer_id+"'>"+e.outstanding+"</td> <td id='points-"+e.customer_id+"'>"+e.points+"</td> <td id='status-"+e.customer_id+"'>"+e.status+"</td> <td id='address-"+e.customer_id+"'>"+e.address+"</td> <td id='postcode-"+e.customer_id+"'>"+e.postcode+"</td> <td id='state-"+e.customer_id+"'>"+e.state+"</td> <td id='salutation-"+e.customer_id+"'>"+e.salutation+"</td> <td id='email-"+e.customer_id+"'>"+e.email+"</td> <td id='website-"+e.customer_id+"'>"+e.website+"</td> <td id='biz_nature-"+e.customer_id+"'>"+e.biz_nature+"</td> <td id='salesperson-"+e.customer_id+"'>"+e.salesperson+"</td> <td id='category-"+e.customer_id+"'>"+e.category+"</td> <td id='city-"+e.customer_id+"'>"+e.city+"</td> <td id='country-"+e.customer_id+"'>"+e.country+"</td> <td id='attention-"+e.customer_id+"'>"+e.attention+"</td> <td id='introducer-"+e.customer_id+"'>"+e.introducer+"</td> <td id='reg_date-"+e.customer_id+"'>"+e.reg_date+"</td> <td id='expiry_date-"+e.customer_id+"'>"+e.expiry_date+"</td> <td id='telephone1-"+e.customer_id+"'>"+e.telephone1+"</td> <td id='telephone2-"+e.customer_id+"'>"+e.telephone2+"</td> <td id='fax-"+e.customer_id+"'>"+e.fax+"</td> <td id='handphone-"+e.customer_id+"'>"+e.handphone+"</td> <td id='skype-"+e.customer_id+"'>"+e.skype+"</td> <td id='nric-"+e.customer_id+"'>"+e.nric+"</td> <td id='gender-"+e.customer_id+"'>"+e.gender+"</td> <td id='dob-"+e.customer_id+"'>"+e.dob+"</td> <td id='race-"+e.customer_id+"'>"+e.race+"</td> <td id='religion-"+e.customer_id+"'>"+e.religion+"</td></tr>")}),r("general")}}(t=t.includes("Success")?JSON.parse(t.replace("Success","")):JSON.parse(t),"general")},error:function(){var t,s;t="Failed",s="Unexpected error occur : "+e,$("#failedToModal").modal("show"),$("#failedModalHeadline").empty().append(t),$("#failedModalBody").empty().append(s)}})}function r(t){switch(t){case"general":$("#generalTable").DataTable({searching:!1,paginate:!1,lengthChange:!1,info:!1,scrollX:!0,scrollY:"1000px",scrollCollapse:!0}).columns.adjust();$(".dataTables_length").addClass("bs-select")}}function d(t){switch(t){case"general":$("#general-table").empty().append('<table id="generalTable" class="table table-hover table-bordered table_fullwidth text-center" cellspacing="0" >  <thead class="grey lighten-2  ">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Customer ID</th>  <th scope="col" class="th-lg">Customer Account</th>  <th scope="col" class="th-lg">Name</th>  <th scope="col" class="th-lg">Reg Num</th>  <th scope="col" class="th-lg">Outstanding</th>  <th scope="col" class="th-lg">Points</th>  <th scope="col" class="th-lg">Status</th>  <th scope="col" class="th-lg">Address</th>  <th scope="col" class="th-lg">Postcode</th>  <th scope="col" class="th-lg">State</th>  <th scope="col" class="th-lg">Salutation</th>  <th scope="col" class="th-lg">Email</th>  <th scope="col" class="th-lg">Website</th>  <th scope="col" class="th-lg">Biz Nature</th>  <th scope="col" class="th-lg">Sales Person</th>  <th scope="col" class="th-lg">Category</th>  <th scope="col" class="th-lg">City</th>  <th scope="col" class="th-lg">Country</th>  <th scope="col" class="th-lg">Attention</th>  <th scope="col" class="th-lg">Introducer</th>  <th scope="col" class="th-lg">Reg Date</th>  <th scope="col" class="th-lg">Expire Date</th>  <th scope="col" class="th-lg">Telephone 1</th>  <th scope="col" class="th-lg">Telephone 2</th>  <th scope="col" class="th-lg">Fax</th>  <th scope="col" class="th-lg">Handphone</th>  <th scope="col" class="th-lg">Skype</th>  <th scope="col" class="th-lg">NRIC</th>  <th scope="col" class="th-lg">Gender</th>  <th scope="col" class="th-lg">DOB</th>  <th scope="col" class="th-lg">Race</th>  <th scope="col" class="th-lg">Religion</th>  </tr>  </thead>  <tbody id="generalContent">  </tbody>  <tfoot class="grey lighten-2">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Customer ID</th>  <th scope="col" class="th-lg">Customer Account</th>  <th scope="col" class="th-lg">Name</th>  <th scope="col" class="th-lg">Reg Num</th>  <th scope="col" class="th-lg">Outstanding</th>  <th scope="col" class="th-lg">Points</th>  <th scope="col" class="th-lg">Status</th>  <th scope="col" class="th-lg">Address</th>  <th scope="col" class="th-lg">Postcode</th>  <th scope="col" class="th-lg">State</th>  <th scope="col" class="th-lg">Salutation</th>  <th scope="col" class="th-lg">Email</th>  <th scope="col" class="th-lg">Website</th>  <th scope="col" class="th-lg">Biz Nature</th>  <th scope="col" class="th-lg">Sales Person</th>  <th scope="col" class="th-lg">Category</th>  <th scope="col" class="th-lg">City</th>  <th scope="col" class="th-lg">Country</th>  <th scope="col" class="th-lg">Attention</th>  <th scope="col" class="th-lg">Introducer</th>  <th scope="col" class="th-lg">Reg Date</th>  <th scope="col" class="th-lg">Expire Date</th>  <th scope="col" class="th-lg">Telephone 1</th>  <th scope="col" class="th-lg">Telephone 2</th>  <th scope="col" class="th-lg">Fax</th>  <th scope="col" class="th-lg">Handphone</th>  <th scope="col" class="th-lg">Skype</th>  <th scope="col" class="th-lg">NRIC</th>  <th scope="col" class="th-lg">Gender</th>  <th scope="col" class="th-lg">DOB</th>  <th scope="col" class="th-lg">Race</th>  <th scope="col" class="th-lg">Religion</th>  </tr>  </tfoot>  </table>')}}t(),$("#currentPageNum").focusout(function(){(""!=$("#searchRow").val()?searchTable:t)()}),$("#search-customer_name").on("keyup",function(){a(1)}),$("#search-customer_id").on("keyup",function(){a(1)}),$("#search-item").on("keyup",function(){o(1)}),$("#addInvoiceSubmitBtn").click(function(){})});