"use strict";$(document).ready(function(){var o=a(),c=s(o);function l(t,e){$("#failedToModal").modal("show"),$("#failedModalHeadline").empty().append(t),$("#failedModalBody").empty().append(e)}function a(){var e;return $.ajax({type:"POST",url:"./backend/customer/customer.php",data:{postType:"countRow"},async:!1,success:function(t){$("#rowTotal").empty().append(t),e=t}}),e}function s(t){var e=Math.ceil(t/20);return $("#pageTotal").empty().text(e),$("#currentPageNum").val()>e&&$("#currentPageNum").val(e),e}function t(){$("#search-input-wrapper").css("display","block"),$("#search-input").empty().append($("#searchRow").val());var a=$("#searchRow").val(),t=$("#currentPageNum").val()>c?c:$("#currentPageNum").val();$("#currentPageNum").val(t),$.ajax({type:"POST",url:"./backend/customer/customer.php",data:{postType:"searchRow",search:a,pageNum:t},success:function(t){var e,o;s((e=a,$.ajax({type:"POST",url:"./backend/customer/customer.php",data:{postType:"searchRowCount",search:e},async:!1,success:function(t){$("#rowTotal").empty().append(t),o=t}}),o)),"No result"==t?(l("Failed","No result match"),n("general"),d("general"),n("additionalinfo"),d("additionalinfo"),n("accounting"),d("accounting")):(h(t=t.includes("Success")?JSON.parse(t.replace("Success","")):JSON.parse(t),"general"),h(t,"additionalinfo"),h(t,"accounting"),$(".editBtn").on("click",function(){$(".editBtn").on("click",function(){var t=$(this).attr("id").split("-"),e=$("#customer_account-"+t[1]).text(),o=$("#name-"+t[1]).text(),a=$("#reg_num-"+t[1]).text(),c=$("#outstanding-"+t[1]).text(),l=$("#points-"+t[1]).text(),s=$("#status-"+t[1]).text(),i=$("#address-"+t[1]).text(),d=$("#postcode-"+t[1]).text(),n=$("#state-"+t[1]).text(),h=$("#salutation-"+t[1]).text(),r=$("#email-"+t[1]).text(),u=$("#website-"+t[1]).text(),p=$("#biz_nature-"+t[1]).text(),g=$("#salesperson-"+t[1]).text(),m=$("#category-"+t[1]).text(),f=$("#city-"+t[1]).text(),x=$("#country-"+t[1]).text(),v=$("#attention-"+t[1]).text(),_=$("#introducer-"+t[1]).text(),b=$("#reg_date-"+t[1]).text(),y=$("#expiry_date-"+t[1]).text(),C=$("#telephone1-"+t[1]).text(),w=$("#telephone2-"+t[1]).text(),I=$("#fax-"+t[1]).text(),k=$("#handphone-"+t[1]).text(),N=$("#skype-"+t[1]).text(),T=$("#nric-"+t[1]).text(),S=$("#gender-"+t[1]).text(),R=$("#dob-"+t[1]).text(),P=$("#race-"+t[1]).text(),B=$("#religion-"+t[1]).text(),A=$("#info1-"+t[1]).text(),D=$("#info2-"+t[1]).text(),O=$("#info3-"+t[1]).text(),M=$("#info4-"+t[1]).text(),z=$("#info5-"+t[1]).text(),j=$("#info6-"+t[1]).text(),F=$("#info7-"+t[1]).text(),E=$("#info8-"+t[1]).text(),J=$("#info9-"+t[1]).text(),H=$("#info10-"+t[1]).text(),X=$("#control_ac-"+t[1]).text(),Y=$("#accounting_account-"+t[1]).text();$("#edit-customer_account").val(e),$("#edit-name").val(o),$("#edit-reg_num").val(a),$("#edit-outstanding").val(c),$("#edit-points").val(l),$("#edit-status").val(s),$("#edit-address").val(i),$("#edit-postcode").val(d),$("#edit-state").val(n),$("#edit-salutation").val(h),$("#edit-email").val(r),$("#edit-website").val(u),$("#edit-biz_nature").val(p),$("#edit-salesperson").val(g),$("#edit-category").val(m),$("#edit-city").val(f),$("#edit-country").val(x),$("#edit-attention").val(v),$("#edit-introducer").val(_),$("#edit-reg_date").val(b),$("#edit-expiry_date").val(y),$("#edit-telephone1").val(C),$("#edit-telephone2").val(w),$("#edit-fax").val(I),$("#edit-handphone").val(k),$("#edit-skype").val(N),$("#edit-nric").val(T),$("#edit-gender").val(S),$("#edit-dob").val(R),$("#edit-race").val(P),$("#edit-religion").val(B),$("#edit-info1").val(A),$("#edit-info2").val(D),$("#edit-info3").val(O),$("#edit-info4").val(M),$("#edit-info5").val(z),$("#edit-info6").val(j),$("#edit-info7").val(F),$("#edit-info8").val(E),$("#edit-info9").val(J),$("#edit-info10").val(H),$("#edit-control_ac").val(X),$("#edit-accounting_account").val(Y),$("#editItemSubmitButton").click(function(){$("#edit_id").val(t[1])})})}),$(".deleteBtn").on("click",function(){var t=$(this).attr("id").split("-");$("#deleteCustomerName").empty().append($("#customer_account-"+t[1]).html()),$("#delete_id").val(t[1])}))},error:function(t){l("Failed","Unexpected error occur : "+t)}})}function i(){var t;o=a(),c=s(o),t=0!=$("#currentPageNum").val()?$("#currentPageNum").val()>c?c:$("#currentPageNum").val():1,$("#currentPageNum").val(t),$.ajax({type:"POST",url:"./backend/customer/customer.php",data:{postType:"view",pageNum:t},success:function(t){"0 results"==t||"No Result"==t?(n("general"),d("general"),n("additionalinfo"),d("additionalinfo"),n("accounting"),d("accounting")):(h(t=t.includes("Success")?JSON.parse(t.replace("Success","")):JSON.parse(t),"general"),h(t,"additionalinfo"),h(t,"accounting"),$(".editBtn").on("click",function(){var t=$(this).attr("id").split("-"),e=$("#customer_account-"+t[1]).text(),o=$("#name-"+t[1]).text(),a=$("#reg_num-"+t[1]).text(),c=$("#outstanding-"+t[1]).text(),l=$("#points-"+t[1]).text(),s=$("#status-"+t[1]).text(),i=$("#address-"+t[1]).text(),d=$("#postcode-"+t[1]).text(),n=$("#state-"+t[1]).text(),h=$("#salutation-"+t[1]).text(),r=$("#email-"+t[1]).text(),u=$("#website-"+t[1]).text(),p=$("#biz_nature-"+t[1]).text(),g=$("#salesperson-"+t[1]).text(),m=$("#category-"+t[1]).text(),f=$("#city-"+t[1]).text(),x=$("#country-"+t[1]).text(),v=$("#attention-"+t[1]).text(),_=$("#introducer-"+t[1]).text(),b=$("#reg_date-"+t[1]).text(),y=$("#expiry_date-"+t[1]).text(),C=$("#telephone1-"+t[1]).text(),w=$("#telephone2-"+t[1]).text(),I=$("#fax-"+t[1]).text(),k=$("#handphone-"+t[1]).text(),N=$("#skype-"+t[1]).text(),T=$("#nric-"+t[1]).text(),S=$("#gender-"+t[1]).text(),R=$("#dob-"+t[1]).text(),P=$("#race-"+t[1]).text(),B=$("#religion-"+t[1]).text(),A=$("#info1-"+t[1]).text(),D=$("#info2-"+t[1]).text(),O=$("#info3-"+t[1]).text(),M=$("#info4-"+t[1]).text(),z=$("#info5-"+t[1]).text(),j=$("#info6-"+t[1]).text(),F=$("#info7-"+t[1]).text(),E=$("#info8-"+t[1]).text(),J=$("#info9-"+t[1]).text(),H=$("#info10-"+t[1]).text(),X=$("#control_ac-"+t[1]).text(),Y=$("#accounting_account-"+t[1]).text();$("#edit-customer_account").val(e),$("#edit-name").val(o),$("#edit-reg_num").val(a),$("#edit-outstanding").val(c),$("#edit-points").val(l),$("#edit-status").val(s),$("#edit-address").val(i),$("#edit-postcode").val(d),$("#edit-state").val(n),$("#edit-salutation").val(h),$("#edit-email").val(r),$("#edit-website").val(u),$("#edit-biz_nature").val(p),$("#edit-salesperson").val(g),$("#edit-category").val(m),$("#edit-city").val(f),$("#edit-country").val(x),$("#edit-attention").val(v),$("#edit-introducer").val(_),$("#edit-reg_date").val(b),$("#edit-expiry_date").val(y),$("#edit-telephone1").val(C),$("#edit-telephone2").val(w),$("#edit-fax").val(I),$("#edit-handphone").val(k),$("#edit-skype").val(N),$("#edit-nric").val(T),$("#edit-gender").val(S),$("#edit-dob").val(R),$("#edit-race").val(P),$("#edit-religion").val(B),$("#edit-info1").val(A),$("#edit-info2").val(D),$("#edit-info3").val(O),$("#edit-info4").val(M),$("#edit-info5").val(z),$("#edit-info6").val(j),$("#edit-info7").val(F),$("#edit-info8").val(E),$("#edit-info9").val(J),$("#edit-info10").val(H),$("#edit-control_ac").val(X),$("#edit-accounting_account").val(Y),$("#editItemSubmitButton").click(function(){$("#edit_id").val(t[1])})}),$(".deleteBtn").on("click",function(){var t=$(this).attr("id").split("-");$("#deleteCustomerName").empty().append($("#customer_account-"+t[1]).html()),$("#delete_id").val(t[1])}))},error:function(){l("Failed","Unexpected error occur : "+e)}})}function d(t){switch(t){case"general":$("#generalTable").DataTable({searching:!1,paginate:!1,lengthChange:!1,info:!1,scrollX:!0,scrollY:"1000px",scrollCollapse:!0}).columns.adjust();$(".dataTables_length").addClass("bs-select");break;case"additionalinfo":$("#additionalinfoTable").DataTable({searching:!1,paginate:!1,lengthChange:!1,info:!1,scrollX:!0,scrollY:"1000px",scrollCollapse:!0}).columns.adjust();$(".dataTables_length").addClass("bs-select");break;case"accounting":$("#accountingTable").DataTable({searching:!1,paginate:!1,lengthChange:!1,info:!1,scrollX:!0,scrollY:"1000px",scrollCollapse:!0}).columns.adjust();$(".dataTables_length").addClass("bs-select")}}function n(t){switch(t){case"general":$("#general-table").empty().append('<table id="generalTable" class="table table-hover table-bordered table_fullwidth text-center" cellspacing="0" >  <thead class="grey lighten-2  ">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Customer ID</th>  <th scope="col" class="th-lg">Customer Account</th>  <th scope="col" class="th-lg">Name</th>  <th scope="col" class="th-lg">Reg Num</th>  <th scope="col" class="th-lg">Outstanding</th>  <th scope="col" class="th-lg">Points</th>  <th scope="col" class="th-lg">Status</th>  <th scope="col" class="th-lg">Address</th>  <th scope="col" class="th-lg">Postcode</th>  <th scope="col" class="th-lg">State</th>  <th scope="col" class="th-lg">Salutation</th>  <th scope="col" class="th-lg">Email</th>  <th scope="col" class="th-lg">Website</th>  <th scope="col" class="th-lg">Biz Nature</th>  <th scope="col" class="th-lg">Sales Person</th>  <th scope="col" class="th-lg">Category</th>  <th scope="col" class="th-lg">City</th>  <th scope="col" class="th-lg">Country</th>  <th scope="col" class="th-lg">Attention</th>  <th scope="col" class="th-lg">Introducer</th>  <th scope="col" class="th-lg">Reg Date</th>  <th scope="col" class="th-lg">Expire Date</th>  <th scope="col" class="th-lg">Telephone 1</th>  <th scope="col" class="th-lg">Telephone 2</th>  <th scope="col" class="th-lg">Fax</th>  <th scope="col" class="th-lg">Handphone</th>  <th scope="col" class="th-lg">Skype</th>  <th scope="col" class="th-lg">NRIC</th>  <th scope="col" class="th-lg">Gender</th>  <th scope="col" class="th-lg">DOB</th>  <th scope="col" class="th-lg">Race</th>  <th scope="col" class="th-lg">Religion</th>  </tr>  </thead>  <tbody id="generalContent">  </tbody>  <tfoot class="grey lighten-2">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Customer ID</th>  <th scope="col" class="th-lg">Customer Account</th>  <th scope="col" class="th-lg">Name</th>  <th scope="col" class="th-lg">Reg Num</th>  <th scope="col" class="th-lg">Outstanding</th>  <th scope="col" class="th-lg">Points</th>  <th scope="col" class="th-lg">Status</th>  <th scope="col" class="th-lg">Address</th>  <th scope="col" class="th-lg">Postcode</th>  <th scope="col" class="th-lg">State</th>  <th scope="col" class="th-lg">Salutation</th>  <th scope="col" class="th-lg">Email</th>  <th scope="col" class="th-lg">Website</th>  <th scope="col" class="th-lg">Biz Nature</th>  <th scope="col" class="th-lg">Sales Person</th>  <th scope="col" class="th-lg">Category</th>  <th scope="col" class="th-lg">City</th>  <th scope="col" class="th-lg">Country</th>  <th scope="col" class="th-lg">Attention</th>  <th scope="col" class="th-lg">Introducer</th>  <th scope="col" class="th-lg">Reg Date</th>  <th scope="col" class="th-lg">Expire Date</th>  <th scope="col" class="th-lg">Telephone 1</th>  <th scope="col" class="th-lg">Telephone 2</th>  <th scope="col" class="th-lg">Fax</th>  <th scope="col" class="th-lg">Handphone</th>  <th scope="col" class="th-lg">Skype</th>  <th scope="col" class="th-lg">NRIC</th>  <th scope="col" class="th-lg">Gender</th>  <th scope="col" class="th-lg">DOB</th>  <th scope="col" class="th-lg">Race</th>  <th scope="col" class="th-lg">Religion</th>  </tr>  </tfoot>  </table>');break;case"additionalinfo":$("#additionalinfo-table").empty().append('<table id="additionalinfoTable" class="table table-hover table-bordered table_fullwidth text-center" cellspacing="0" >  <thead class="grey lighten-2  ">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Customer ID</th>  <th scope="col" class="th-lg">Info 1</th>  <th scope="col" class="th-lg">Info 2</th>  <th scope="col" class="th-lg">Info 3</th>  <th scope="col" class="th-lg">Info 4</th>  <th scope="col" class="th-lg">Info 5</th>  <th scope="col" class="th-lg">Info 6</th>  <th scope="col" class="th-lg">Info 7</th>  <th scope="col" class="th-lg">Info 8</th>  <th scope="col" class="th-lg">Info 9</th>  <th scope="col" class="th-lg">Info 10</th>  </tr>  </thead>  <tbody id="additionalinfoContent">  </tbody>  <tfoot class="grey lighten-2">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Customer ID</th>  <th scope="col" class="th-lg">Info 1</th>  <th scope="col" class="th-lg">Info 2</th>  <th scope="col" class="th-lg">Info 3</th>  <th scope="col" class="th-lg">Info 4</th>  <th scope="col" class="th-lg">Info 5</th>  <th scope="col" class="th-lg">Info 6</th>  <th scope="col" class="th-lg">Info 7</th>  <th scope="col" class="th-lg">Info 8</th>  <th scope="col" class="th-lg">Info 9</th>  <th scope="col" class="th-lg">Info 10</th>  </tr>  </tfoot>  </table>');break;case"accounting":$("#accounting-table").empty().append('<table id="accountingTable" class="table table-hover table-bordered table_fullwidth text-center" cellspacing="0">  <thead class="grey lighten-2  ">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Customer ID</th>  <th scope="col" class="th-lg">Control A/C</th>  <th scope="col" class="th-lg">Account</th>  </tr>  </thead>  <tbody id="accountingContent">  </tbody>  <tfoot class="grey lighten-2">  <tr>  <th scope="col">#</th>  <th scope="col" class="text-center th-lg">Action</th>  <th scope="col" class="th-lg">Customer ID</th>  <th scope="col" class="th-lg">Control A/C</th>  <th scope="col" class="th-lg">Account</th>  </tr>  </tfoot>  </table>'),$(".dataTables_length").addClass("bs-select")}}function h(t,e){switch(e){case"general":n("general"),$.each(t,function(t,e){t++,$("#generalContent").append('<tr> <th scope="row">'+t+'</th> <td> <button id="edit-'+e.customer_id+'" class="btn btn-warning editBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#editModal"> <i class="fas fa-edit"></i> </button> <button id="delete-'+e.customer_id+'" class="btn btn-danger deleteBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#deleteModal"> <i class="fas fa-trash-alt"></i> </button> </td> <td id=\'customer_id-'+e.customer_id+"'>"+e.customer_id+"</td> <td id='customer_account-"+e.customer_id+"'>"+e.customer_account+"</td> <td id='name-"+e.customer_id+"'>"+e.name+"</td> <td id='reg_num-"+e.customer_id+"'>"+e.reg_num+"</td> <td id='outstanding-"+e.customer_id+"'>"+e.outstanding+"</td> <td id='points-"+e.customer_id+"'>"+e.points+"</td> <td id='status-"+e.customer_id+"'>"+e.status+"</td> <td id='address-"+e.customer_id+"'>"+e.address+"</td> <td id='postcode-"+e.customer_id+"'>"+e.postcode+"</td> <td id='state-"+e.customer_id+"'>"+e.state+"</td> <td id='salutation-"+e.customer_id+"'>"+e.salutation+"</td> <td id='email-"+e.customer_id+"'>"+e.email+"</td> <td id='website-"+e.customer_id+"'>"+e.website+"</td> <td id='biz_nature-"+e.customer_id+"'>"+e.biz_nature+"</td> <td id='salesperson-"+e.customer_id+"'>"+e.salesperson+"</td> <td id='category-"+e.customer_id+"'>"+e.category+"</td> <td id='city-"+e.customer_id+"'>"+e.city+"</td> <td id='country-"+e.customer_id+"'>"+e.country+"</td> <td id='attention-"+e.customer_id+"'>"+e.attention+"</td> <td id='introducer-"+e.customer_id+"'>"+e.introducer+"</td> <td id='reg_date-"+e.customer_id+"'>"+e.reg_date+"</td> <td id='expiry_date-"+e.customer_id+"'>"+e.expiry_date+"</td> <td id='telephone1-"+e.customer_id+"'>"+e.telephone1+"</td> <td id='telephone2-"+e.customer_id+"'>"+e.telephone2+"</td> <td id='fax-"+e.customer_id+"'>"+e.fax+"</td> <td id='handphone-"+e.customer_id+"'>"+e.handphone+"</td> <td id='skype-"+e.customer_id+"'>"+e.skype+"</td> <td id='nric-"+e.customer_id+"'>"+e.nric+"</td> <td id='gender-"+e.customer_id+"'>"+e.gender+"</td> <td id='dob-"+e.customer_id+"'>"+e.dob+"</td> <td id='race-"+e.customer_id+"'>"+e.race+"</td> <td id='religion-"+e.customer_id+"'>"+e.religion+"</td></tr>")}),d("general");break;case"additionalinfo":n("additionalinfo"),$.each(t,function(t,e){t++,$("#additionalinfoContent").append('<tr> <th scope="row">'+t+'</th> <td> <button id="edit-'+e.customer_id+'" class="btn btn-warning editBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#editModal"> <i class="fas fa-edit"></i> </button> <button id="delete-'+e.customer_id+'" class="btn btn-danger deleteBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#deleteModal"><i class="fas fa-trash-alt"></i> </button> </td> <td id=\'customer-id-'+e.customer_id+"'>"+e.customer_id+"</td> <td id='info1-"+e.customer_id+"'>"+e.info1+"</td> <td id='info2-"+e.customer_id+"'>"+e.info2+"</td> <td id='info3-"+e.customer_id+"'>"+e.info3+"</td> <td id='info4-"+e.customer_id+"'>"+e.info4+"</td> <td id='info5-"+e.customer_id+"'>"+e.info5+"</td> <td id='info6-"+e.customer_id+"'>"+e.info6+"</td> <td id='info7-"+e.customer_id+"'>"+e.info7+"</td> <td id='info8-"+e.customer_id+"'>"+e.info8+"</td> <td id='info9-"+e.customer_id+"'>"+e.info9+"</td> <td id='info10-"+e.customer_id+"'>"+e.info10+"</td> </tr>")}),d("additionalinfo");break;case"accounting":n("accounting"),$.each(t,function(t,e){t++,$("#accountingContent").append('<tr> <th scope="row">'+t+'</th> <td> <button id="edit-'+e.customer_id+'" class="btn btn-warning editBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#editModal"> <i class="fas fa-edit"></i> </button> <button id="delete-'+e.customer_id+'" class="btn btn-danger deleteBtn py-md-3 px-md-4 p-sm-3" data-toggle="modal" data-target="#deleteModal"><i class="fas fa-trash-alt"></i> </button> </td> <td id=\'customer-id-'+e.customer_id+"'>"+e.customer_id+"</td> <td id='control_ac-"+e.customer_id+"'>"+e.control_ac+"</td> <td id='accounting_account-"+e.customer_id+"'>"+e.accounting_account+"</td> </tr>")}),d("accounting")}}$("#searchRow").val()?($("#search-input-wrapper").css("display","block"),$("#search-input").empty().append($("#searchRow").val()),t()):i(),$("#searchConfirm").click(function(){t($("#searchRow").val())}),$("#searchClear").click(function(){i(),$("#searchRow").val(""),$("#search-input-wrapper").css("display","none")}),$("#currentPageNum").focusout(function(){(""!=$("#searchRow").val()?t:i)()})});